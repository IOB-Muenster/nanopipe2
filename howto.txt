How to enable the nanopipe pipeline?
========================================================================

First of all: choose a directory (here always named /path/to/nanopipe)
where you place all nanopipe related stuff, meaning programs and your
genome targets.  The directory where you place your generated data
depends on your favorite location.

Then enter the directory and download the file nanopipe2.tgz from the
github repository https://github.com/IOB-Muenster/nanopipe2.  Extract
the content, you will get a folder like:

# ll
total 92
drwxr-xr-x  4 user  group      7 Sep 19 11:12 .
drwxr-xr-x  9 user  group     16 Sep 19 10:48 ..
drwxr-xr-x  3 user  group      3 Jun 29 15:29 calculate
drwxr-xr-x  3 user  group      3 Jun 29 15:29 modules
drwxr-xr-x  3 user  group      3 Jun 29 15:29 targets

Then you need to adjust some settings.  First the file
modules/nanopipe2/paths.pm and change the line

our $PROJDIR = "Please enter your nanopipe2 directory here!";

with

our $PROJDIR = "/path/to/nanopipe";


Adjust paths
========================================================================

Set the neccessary perl path and the executable path with

# setenv PATH /path/to/nanopipe/calculate
# setenv PERL5LIB /path/to/nanopipe/modules

or

# export PATH=/path/to/nanopipe/calculate
# export PERL5LIB=/path/to/nanopipe/modules

so the perl modules and executables can be found.  This is depending
of which shell you use.  You can place this in .bashrc or .tcshrc
files


Create the last binaries
========================================================================

Download a new version of last http://last.cbrc.jp/ and do the
following steps:

set the path and create folders

# export TOOLSDIR=/path/to/nanopipe/tools
# mkdir -p $TOOLSDIR/bin

and then execute on FreeBSD (asuming you took last version 932, please
change to your version!) - please use a bource shell or bash!

	[ -d last ] && rm -rf last

	unzip last-923.zip
	mv last-923 last

	cd last/src
	sed -e '{
	s/= g++/= c++/;
	s/= gcc/= cc/
	}' <makefile >x
	mv x makefile
	cd ..
	gmake
	cd ..

	rsync -av last/src/last-split $TOOLSDIR/bin
	rsync -av last/src/lastal $TOOLSDIR/bin
	rsync -av last/src/lastdb $TOOLSDIR/bin
	rsync -av last/scripts/maf-convert $TOOLSDIR/bin
	rsync -av last/scripts/last-train $TOOLSDIR/bin

	rm -rf last

or on Linux

	[ -d last ] && rm -rf last

	unzip last-923.zip
	mv last-923 last

	cd last/src
	cd ..
	make
	cd ..

	rsync -av last/src/last-split $TOOLSDIR/bin
	rsync -av last/src/lastal $TOOLSDIR/bin
	rsync -av last/src/lastdb $TOOLSDIR/bin
	rsync -av last/scripts/maf-convert $TOOLSDIR/bin
	rsync -av last/scripts/last-train $TOOLSDIR/bin

	rm -rf last


Create a target
========================================================================

To create a new target, do the folowing steps:

- Create a new subfolder in /path/to/nanopipe/targets

- (Maybe) Copy the (global) config file
  /path/to/nanopipe/targets/config into your subfolder and adjust it
  to needs.  This depends on your settings: The global config file is
  always read, the target only if present.

- Create the target database.  Put the genome fasta file called into
  the subfolder with the name target.fasta.

- Create the fasta file named target.fasta

- Then run the command lastdb in the target's folder

    # /path/to/nanopipe/tools/freebsd/bin/lastdb target target.fasta


